<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Workflow Prompt Builder</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body {
  font-family: Arial;
  background: #0f172a;
  color: white;
  text-align: center;
  padding: 40px;
}
.step { display:none; }
button {
  padding:10px 20px;
  margin:10px;
  background:#22c55e;
  border:none;
  color:white;
  cursor:pointer;
}
.card {
  background:#1e293b;
  padding:20px;
  border-radius:10px;
  margin-top:20px;
}
textarea {
  width:90%;
  height:250px;
  background:black;
  color:#00ff88;
  padding:10px;
}
</style>
</head>

<body>

<h1>AI Workflow Builder</h1>

<div id="step1" class="step" style="display:block">
<h2>Content Type</h2>
<button onclick="selectType('Video')">Video</button>
<button onclick="selectType('Image')">Image</button>
<button onclick="selectType('Text')">Text</button>
</div>

<div id="step2" class="step">
<h2>Platform</h2>
<button onclick="selectPlatform('YouTube')">YouTube</button>
<button onclick="selectPlatform('TikTok')">TikTok</button>
<button onclick="selectPlatform('Instagram')">Instagram</button>
</div>

<div id="step3" class="step">
<h2>Tone</h2>
<button onclick="selectTone('Educational')">Educational</button>
<button onclick="selectTone('Motivational')">Motivational</button>
<button onclick="selectTone('Storytelling')">Storytelling</button>
</div>

<div id="step4" class="step">
<h2>Mode</h2>
<button onclick="selectMode('static')">Static Mode</button>
<button onclick="selectMode('ai')">AI Mode</button>
</div>

<div id="result" class="step card">
<h2>Generated Workflow Prompt</h2>
<textarea id="output"></textarea><br>
<button onclick="copyPrompt()">Copy</button>
<button onclick="downloadPDF()">Download PDF</button>
</div>

<script>

let user = {
type:"",
platform:"",
tone:"",
mode:"static"
};

function next(current,next){
document.getElementById(current).style.display="none";
document.getElementById(next).style.display="block";
}

function selectType(val){
user.type = val;
next("step1","step2");
}

function selectPlatform(val){
user.platform = val;
next("step2","step3");
}

function selectTone(val){
user.tone = val;
next("step3","step4");
}

function selectMode(val){
user.mode = val;
generate();
}

const staticAssumptions = {
"YouTube_Motivational":{
situation:"Motivational YouTube creators struggle to stand out.",
bad:"Generic wake up early hooks fail.",
constraints:"Shorts under 60 sec.",
goal:"Retention and emotional impact."
}
};

async function runGemini(){
let res = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=YOUR_API_KEY",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
contents:[{
parts:[{text:`Create niche assumptions for ${user.type} on ${user.platform} with ${user.tone}`}]}]})
});
let data = await res.json();
return data.candidates[0].content.parts[0].text;
}

async function generate(){

let situation,bad,constraints,goal;

if(user.mode=="static"){
let key = user.platform+"_"+user.tone;
let data = staticAssumptions[key] || {
situation:"Creators struggle with clarity.",
bad:"Generic formats fail.",
constraints:"Platform limits apply.",
goal:"Real engagement."
};
situation=data.situation;
bad=data.bad;
constraints=data.constraints;
goal=data.goal;
}
else{
let ai = await runGemini();
situation = ai;
bad="Overused formats exist.";
constraints="Platform limits.";
goal="Trust + engagement.";
}

let prompt = `
ROLE:
You are an expert ${user.type} strategist.

SITUATION:
${situation}

ALREADY TRIED:
${bad}

CONSTRAINTS:
${constraints}

REAL GOAL:
Surface → Create ${user.tone} ${user.type}
Real → Drive engagement on ${user.platform}

TASK:
Generate production workflow.
`;

document.getElementById("output").value = prompt;
next("step4","result");
}

function copyPrompt(){
let t = document.getElementById("output");
t.select();
document.execCommand("copy");
alert("Copied!");
}

function downloadPDF(){
let element = document.getElementById("output");
html2pdf().from(element).save("workflow.pdf");
}

</script>

</body>
</html>
